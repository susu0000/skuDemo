# skuDemo

## 0 ä¸šåŠ¡åœºæ™¯

![image](http://upload-images.jianshu.io/upload_images/1963623-b74c8c6e2f17db07?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æœåŠ¡å™¨è¿”å›æ•°æ®:

```json
// æ•°æ®1
[
    {"é¢œè‰²" : "ç»¿è‰²", "æ¬¾å¼" : "2018æ¬¾", "å°ºç " : "M", "sku_id" : "1"},
 	{"é¢œè‰²" : "çº¢è‰²", "æ¬¾å¼" : "2016æ¬¾", "å°ºç " : "M", "sku_id" : "2"},
 	{"é¢œè‰²" : "ç»¿è‰²", "æ¬¾å¼" : "2016æ¬¾", "å°ºç " : "S", "sku_id" : "3"},
 	{"é¢œè‰²" : "è“è‰²", "æ¬¾å¼" : "2017æ¬¾", "å°ºç " : "L", "sku_id" : "4"},
	{"é¢œè‰²" : "ç»¿è‰²", "æ¬¾å¼" : "2018æ¬¾", "å°ºç " : "L", "sku_id" : "5"}
]
```

å½“ç„¶ä¸­é—´è¿˜èƒ½æ·»åŠ skuåº“å­˜æˆ–è€…ä»·æ ¼ä¹‹ç±»çš„å‚æ•°å¦‚ä¸‹,ä½†æ˜¯æœ¬æ–‡ä¸æ¶‰åŠæ­¤ç±»å†…å®¹

```json
{@"é¢œè‰²" : @"ç»¿è‰²", @"æ¬¾å¼" : @"2018æ¬¾", @"å°ºç " : @"M", @"sku_stock" : @"10", @"sku_price" : @"20.00", @"sku_id" : @"1"},
```

å…ˆå°†æœåŠ¡å™¨è¿”å›æ•°æ®è¿›è¡Œ`group`å¤„ç†,å¤„ç†åæ ¼å¼å¦‚ä¸‹:

```json
// æ•°æ®2
["é¢œè‰²", "æ¬¾å¼", "å°ºç "]
```

è¿™æ—¶å€™éœ€è¦åˆ—ä¸¾å‡ºæ‰€æœ‰ç»„åˆè·¯å¾„,å½¢æˆä¸€ä¸ª[ç¬›å¡å°”ç§¯](https://zh.wikipedia.org/wiki/%E7%AC%9B%E5%8D%A1%E5%84%BF%E7%A7%AF)

```json
// æ•°æ®3
[
    ["ç»¿è‰²", "2016æ¬¾", "S"],	// å¯é€‰
	["ç»¿è‰²", "2016æ¬¾", "M"],
	["ç»¿è‰²", "2016æ¬¾", "L"],
	["ç»¿è‰²", "2017æ¬¾", "S"],
	["ç»¿è‰²", "2017æ¬¾", "M"],
	["ç»¿è‰²", "2017æ¬¾", "L"],
	["ç»¿è‰²", "2018æ¬¾", "S"],
	["ç»¿è‰²", "2018æ¬¾", "M"],	// å¯é€‰
	["ç»¿è‰²", "2018æ¬¾", "L"],	// å¯é€‰
	
	["çº¢è‰²", "2016æ¬¾", "S"],
	["çº¢è‰²", "2016æ¬¾", "M"],	// å¯é€‰
	["çº¢è‰²", "2016æ¬¾", "L"],
	["çº¢è‰²", "2017æ¬¾", "S"],
	["çº¢è‰²", "2017æ¬¾", "M"],
	["çº¢è‰²", "2017æ¬¾", "L"],
	["çº¢è‰²", "2018æ¬¾", "S"],
	["çº¢è‰²", "2018æ¬¾", "M"],
	["çº¢è‰²", "2018æ¬¾", "L"],
	
	["è“è‰²", "2016æ¬¾", "S"],
	["è“è‰²", "2016æ¬¾", "M"],
	["è“è‰²", "2016æ¬¾", "L"],
	["è“è‰²", "2017æ¬¾", "S"],
	["è“è‰²", "2017æ¬¾", "M"],
	["è“è‰²", "2017æ¬¾", "L"],	// å¯é€‰
	["è“è‰²", "2018æ¬¾", "S"],
	["è“è‰²", "2018æ¬¾", "M"],
	["è“è‰²", "2018æ¬¾", "L"],
]
```



## 1 é—®é¢˜æè¿°:

æœ¯è¯­ç¡®å®š:

`è·¯å¾„`:    å¦‚"è“è‰²", "2016æ¬¾", "S"       ä¸€ç§èƒ½å¤Ÿç¡®å®šå•†å“ç±»å‹çš„é€‰æ‹©

`skuå•å…ƒ`: å¦‚ "è“è‰²"   ä¸€ç§èƒ½é€‰æ‹©çš„æœ€å°å•ä½

`skuå•å…ƒç»„`:  å¦‚  {"é¢œè‰²" : ["ç»¿è‰²", "çº¢è‰²", "è“è‰²"]}  ä¸€ç§è§„æ ¼çš„åç§°,åŠå…¶è§„æ ¼ä¸‹æ‰€æœ‰å¯é€‰å‚æ•°ç»„æˆçš„é›†åˆ



è·¯å¾„æ€»æ•°ä¸ºæ¯ä¸ª`skuå•å…ƒç»„`ä¸‹å¯é€‰å‚æ•°æ•°é‡çš„ç´¯ä¹˜,æ­¤ğŸŒ°ä¸­ä¸º 3 * 3 * 3 = 27ç§è·¯å¾„.åˆ°æ­¤ä¸ºæ­¢éƒ½åªæ˜¯å¾ˆç®€å•çš„è®¡ç®—.

éš¾ç‚¹åœ¨äºä¸æ˜¯æ¯ç§skuéƒ½å¯é€‰,å¿…é¡»è¦å°†ä¸å¯é€‰çš„`è·¯å¾„`ç»™ç½®ç°,å¦åˆ™å®¹æ˜“é€ æˆç”¨æˆ·çš„è¯¯è§£,ä»¥ä¸‹ä»‹ç»2ä¸­å¼€å‘æ€è·¯.

å»ºè®®éƒ½è¿›è¡Œé˜…è¯»å¹¶å¯¹æ¯”ä¸¤ç§æ€è·¯çš„ä¼˜åŠ£.

## 1 å¸¸è§„å¼€å‘æ€æƒ³

[Sku å¤šç»´å±æ€§çŠ¶æ€åˆ¤æ–­ç®—æ³•](https://juejin.im/entry/5868655861ff4b0057774be7)



## 2 åˆ©ç”¨è´¨å› æ•°åˆ†è§£çš„æ–¹å¼è¿›è¡Œå¼€å‘

ä¸åŒäºä¸Šä¸€ç§æ–¹å¼çš„å¤šçº§éå†,æ­¤ç§æ–¹å¼åˆ©ç”¨ä»»ä½•æ•°çš„è´¨å› æ•°åˆ†è§£çš„ç»“æœå”¯ä¸€æ€§å»åˆ¤æ–­`è·¯å¾„`,æ¯”ä¸Šä¸€ç§æ–¹å¼çš„ç®—æ³•å¤æ‚åº¦æ›´ä½.

å°†`æ•°æ®1`è½¬åŒ–ä¸ºä»¥ä¸‹æ ¼å¼

```json
// æ•°æ®4
[["ç»¿è‰²", "çº¢è‰²", "è“è‰²"],  ["2016æ¬¾", "2017æ¬¾", "2018æ¬¾"],  ["S", "M", "L"]]
```

å°†`æ•°æ®4`æŒ‰é¡ºåºè½¬åŒ–ä¸ºè´¨æ•°

```json
// æ•°æ®5
[[2, 3, 5],  [7, 11, 13],  [17, 19, 23]]
```

æ ¹æ®`æ•°æ®1`å’Œ`æ•°æ®5`è·å¾—å¯è¡Œ`è·¯å¾„`ä¸‹æ¯ä¸ªskué€‰é¡¹å¯¹åº”`è´¨æ•°`çš„ä¹˜ç§¯

```json
// æ•°æ®6
// {"é¢œè‰²" : "ç»¿è‰²", "æ¬¾å¼" : "2018æ¬¾", "å°ºç " : "M", "sku_id" : "1", "prime" : 494},
// {"é¢œè‰²" : "çº¢è‰²", "æ¬¾å¼" : "2016æ¬¾", "å°ºç " : "M", "sku_id" : "2", "prime"},
// {"é¢œè‰²" : "ç»¿è‰²", "æ¬¾å¼" : "2016æ¬¾", "å°ºç " : "S", "sku_id" : "3"},
// {"é¢œè‰²" : "è“è‰²", "æ¬¾å¼" : "2017æ¬¾", "å°ºç " : "L", "sku_id" : "4"},
// {"é¢œè‰²" : "ç»¿è‰²", "æ¬¾å¼" : "2018æ¬¾", "å°ºç " : "L", "sku_id" : "5"}
// ç»¿ - 2018 - M = 2 * 13 * 19 = 494
// çº¢ - 2016 - M = 3 * 7  * 19 = 399
// ç»¿ - 2016 - S = 2 * 7  * 17 = 238
// è“ - 2017 - L = 5 * 11 * 23 = 1265
// ç»¿ - 2018 - L = 2 * 13 * 23 = 598

[494, 399, 238, 1265, 598]

```

ç„¶åç»´æŠ¤ä¸€ä¸ªæ¯ä¸ª`skuå•å…ƒç»„`å½“å‰é€‰ä¸­çš„è´¨æ•°(å¦‚æœæœªé€‰åˆ™ä¸º1)çš„æ•°ç»„,æ ¼å¼å¦‚ä¸‹:

```json
// æ•°æ®7
// å…¨ä¸é€‰
[1, 1, 1]
// çº¢ - æ²¡é€‰ - L
[3, 1, 23]
// æ²¡é€‰ - 2017 -M
[1, 11, 19]

```

å‡å¦‚éƒ½æ²¡é€‰çš„æƒ…å†µä¸‹,ç‚¹å‡»äº†é€‰ä¸­äº†ç»¿è‰²+L.åˆ™`æ•°æ®7`

```json
// æ•°æ®7çš„è½¬åŒ–
[1, 1, 1] -> [2, 1, 23] 
```



æ­¤æ—¶å¼€å§‹å¯ä»¥è®¡ç®—æ¯ä¸ª`skuå•å…ƒ`çŠ¶æ€çš„è°ƒæ•´:

æ¯ä¸ª `skuå•å…ƒ`åˆ†ä¸º3ä¸­çŠ¶æ€

çŠ¶æ€1.é€‰ä¸­![image](http://upload-images.jianshu.io/upload_images/1963623-78daab91c880a9fd?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

çŠ¶æ€2:å¯é€‰![image](http://upload-images.jianshu.io/upload_images/1963623-2ec24eba32a6a4ac?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

çŠ¶æ€3.ä¸å¯é€‰![image](http://upload-images.jianshu.io/upload_images/1963623-a9adced62920c55d?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è®¡ç®—æµç¨‹å¦‚ä¸‹:

1.é€šè¿‡åˆ¤æ–­`skuå•å…ƒ`å¯¹åº”çš„è´¨æ•°æ˜¯å¦åœ¨`æ•°æ®7`ä¸­å‡ºç°æ¥ç¡®å®šæ˜¯å¦æ˜¯çŠ¶æ€1,å¦‚æœå­˜åœ¨åˆ™è¿”å›çŠ¶æ€1. å¦‚æœä¸å­˜åœ¨åˆ™ç»§ç»­è¿›è¡Œè®¡ç®—

2.å¯¹`æ•°æ®7`è¿›è¡Œé­”æ”¹å°†`skuå•å…ƒ`æ‰€åœ¨è¡Œçš„è´¨æ•°æ”¹ä¸ºè‡ªå·±å¯¹åº”çš„å­—æ•°å¹¶è®°å½•åœ¨ä¸€ä¸ªä¸´æ—¶`æ•°æ®8`ä¸­

```json
// æ•°æ®7æ­¤æ—¶çŠ¶æ€
[2, 1, 23] 
// å¯¹äº"çº¢è‰²"æ•°æ®8ä¸º
[3, 1, 23]
// å¯¹äº"M"æ•°æ®8ä¸º
[2, 1, 19]
// å¯¹äº"2018" æ•°æ®9ä¸º
[2, 13, 23] 
// ...

```

3.å°†æ¯ä¸ª`skuå•å…ƒ`çš„`æ•°æ®8`ä¸­çš„æ•°æ®ç´¯ä¹˜å¹¶è®°å½•ä¸€ä¸ªä¸´æ—¶`æ•°æ®9`

```json
// æ•°æ®7æ­¤æ—¶çŠ¶æ€
[2, 1, 23] 
// å¯¹äº"çº¢è‰²"æ•°æ®9ä¸º
3 * 1  * 23 = 69
// å¯¹äº"M"æ•°æ®8ä¸º
2 * 1  * 19 = 38
// å¯¹äº"2018" æ•°æ®9ä¸º
2 * 13 * 23  = 598
// ...
```

4.æ¯ä¸ª`skuå•å…ƒ`ç”¨è‡ªå·±çš„`æ•°æ®9`å»å¯¹`æ•°æ®6`ä¸­çš„æ•°æ®è¿›è¡Œé™¤æ³•è¿ç®—å¦‚æœèƒ½æ•´é™¤åˆ™ä¸º`çŠ¶æ€2`åä¹‹ä¸º`çŠ¶æ€3`

```json
// "çº¢è‰²" æ•°æ®9: 69
æ— æ•´é™¤ç»“æœè¿”å›çŠ¶æ€3
// "M" æ•°æ®9: 38
å­˜åœ¨å¯ä»¥æ•´é™¤çš„æ•°494 è¿”å›çŠ¶æ€2
// "2018" æ•°æ®9: 598
å­˜åœ¨å¯ä»¥æ•´é™¤çš„æ•°598 è¿”å›çŠ¶æ€2
```

1. ç»“æœå¦‚å›¾:

   ![image-201804201142358çš„å‰¯æœ¬.png](https://upload-images.jianshu.io/upload_images/1963623-9eb6d38e1dc340af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)







## Demoåœ°å€

[skuDemo](https://github.com/YYYYCY/skuDemo)